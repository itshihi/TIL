### Vector
#### 1. 정의

```cpp
// 크기가 0인 벡터 선언
std::vector<int> vec;

// 지정한 초기값으로 이뤄진 크기가 5인 벡터 선언
std::vector<int> vec = {1,2,3,4,5};

// 크기가 10인 벡터 선언
std::vector<int> vec(10);

// 크기가 10이고, 모든 원소가 5로 초기화된 벡터 선언
std::vector<int> vec(10,5);
```

* 벡터는 원소 크기를 지정하지 않고 선언할 수 있다.
* 벡터의 크기를 명시적으로 지정하지 않거나, 초깃값을 지정하여 크기를 유추할 수 있게 코드를 지정하지 않을 경우, 컴파일러 구현 방법에 따른 용량을 갖는 벡터가 생성된다.
* 벡터의 크기는 벡터에 실제로 저장된 원소 개수를 나타내는 용어이며, 용량과는 다르다.
* 따라서 첫번째 초기화의 경우엔 크기는 0이지만, 용량은 작은 양수일수도 있다.




### Vector method
#
#### :point_right: 삽입 | push_back(), insert()

> push_back()

:   벡터의 맨 마지막에 새로운 원소를 추가한다.

```cpp
push_back(val):

    if size < capacity  // 새 원소를 추가할 공간이 있을 경우
        - 마지막 원소 다음에 val 저장  
        - 벡터 크기를 1만큼 증가
        - O(1)
        return;
    
    if vector is already full // 할당된 메모리 공간이 가득 차 있는 경우
    - 2*size 크기의 메모리를 새로 할당
    - 새로 할당한 메모리로 기존 원소 전부를 복사/이동
    - 데이터 포인터를 새로 할당한 메모리 주소로 지정
    - 마지막 원소 다음에 val을 저장하고, 벡터 크기를 1만큼 증가
    - n개의 원소를 추가한 경우: O(n)

    즉 push_back()의 보통 시간 복잡도는 평균 O(1)로 빠른 편
```
> insert()

: 삽입할 위치를 나타내는 반복자를 첫 번째 인자로 받음으로써 원하는 위치에 원소를 추가할 수 있다.

- 지정한 반복자 위치 다음의 모든 원소를 이동시키는 연산이 필요하므로 O(n)의 시간 소요
- 필요한 경우 메모리를 새로 할당하는 작업도 필요

```cpp
// 벡터의 맨 앞에 새로운 원소를 추가
vec.insert(int.begin(),0)

vec.insert(find(vec.begin(), vec.end(), 1), 4); // 1 "앞에" 4 추가
```

insert() 함수는 원소를 삽입할 위치를 반복자 타입의 인자로 받는다.

- 여기서 반복자 타입의 인자란, 함수나 알고리즘에 전달되는 인자(insert함수에 전달되는 인자)가 stl 컨테이너의 요소를 가리키는 반복자(iterator)인 경우를 말한다.
- 반복자는 stl 컨테이너의 요소에 접근하고 반복하는데 사용되는 객체이다. 

> 단점

함수가 추가할 원소를 먼저 임시로 생성한 후, 벡터 버퍼 내부 위치로
<br>


```
버퍼 vs 캐시

1 버퍼(Buffer) : 임시저장영역

- 데이터를 한 곳에서 다른 곳으로 전송하는 동안 임시로 보관하는데 사용.

- 주로 데이터 전송 속도를 최적화하거나 데이터 전송 중 발생하는 지연을 완화하는데 사용

2 캐시(Cache) :작고 빠른 메모리 구성 요소

- CPU 데이터 접근 속도 향상시키기 위해 사용

- 빠르게 데이터를 가져오기 위해 최근에 사용된/예측된 데이터 미리 저장하는데 사용

즉, 캐시는 읽기부분에, 버퍼는 쓰기 부분에 사용

```
#




#### :point_right: 제거 | pop_back(), erase()

> pop_back()

- 맨 뒤 원소 하나 제거
- 크기만 제거, 용량은 유지
- 남아 있는 원소의 위치를 조정하지 않아도 되므로 O(1)

```cpp
vec.pop_back() // 벡터 크기 -1

```

> erase()

```cpp
vec.erase(vec.begin()+1, vec.begin()+3);
```

-  반복자 하나를 인자로 받아 해당 위치 원소를 제거
-  범위의 시작과 끝을 나타내는 반복자를 받아 시작부터 "끝 바로 앞 원소"까지 제거
- 특정 위치의 원소를 삭제한 후 나머지 원소들을 모두 앞으로 이동해야하므로 O(n) 시간 소요


#### :point_right: 나머지

> clear()

모든 원소를 제거하여 완전히 비어있는 벡터로 만든다. (크기와 용량 모두 0)

> reserve(정수 capacity)


- 벡터에서 사용할 용량을 지정한다.
- 매개변수로 지정한 값이 용량보다 크면 매개변수로 크기를 재조정한다.
- 이 때 size<=capacity를 만족해야한다.

> shrink_to_fit()

- 여분의 메모리 공간을 해제하는 용도로 사용
- 벡터 용량을 크기에 맞춰 재조정하므로 벡터의 크기가 변하지 않을 때 사용하면 굳

### 벡터 할당자(Allocator)

메모리 할당과 해제를 추상화하는 클래스로, 메모리를 효율적으로 관리할 수 있도록 도와준다.

`벡터에서 할당자가 필요한 이유?`

-  할당자는 메모리 관리 전략의 자유도가 더 높다.

- 벡터의 템플릿 인자로 할당자 타입을 지정하여 메모리 관리를 커스터마이즈할 수 있다.







